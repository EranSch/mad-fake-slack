# Цель данного проекта
* Помочь в тестировании вашего бота или приложения, без использования реального сервера `Slack`. Пригодится так же для написания интеграционных и `e2e` тестов.

### Как поднять проект локально для разработки (Разработка ведется в VSCode)
* Для того чтобы поднять рабочее окружение тебе понадобится:
  * `Docker` приложение для твоей ОС скачать можно тут https://docs.docker.com/install/
* Склонируйте текущий проект в любое удобное для вас расположение (используя к примеру, слудующую команду):
    * `git clone https://github.com/maddevsio/mad-fake-slack.git`
* Далее необходимо установить `VSCode`
  * Вот 3 быстрых шага, чтобы начать делать удаленную разработку кода Visual Studio
    * Установите [стабильную сборку VSCode](https://code.visualstudio.com).
    * Получите [пакет расширений для удаленной разработки](https://aka.ms/VSCodeRemoteExtensionPack)
    * Прочитайте [документы](https://aka.ms/vscode-remote). Попробуйте [образцы Dev Container](https://github.com/search?q=org%3AMicrosoft+vscode-remote-try-&unscoped_q=vscode-remote-try-).
* Далее нужно открыть проект в `VSCode`.
* Посмотрите [видео по Remote-Containers](https://youtu.be/TVcoGLL6Smo) на Ютубе.
* Появится всплывающее сообщение `Reopen in Container`.
* VSCode перезагрузится и начнет поднимать контейнеры (Убедитесь что сервис докера запущен).
* Далее можно вызвать терминал `VSCode`, который если все будет успешно, будет привязан к докеру для разработки, c установленными в нем всем необходимым. Вы увидите приветсвие типа `root@e6e415dc0d02:/workspace` или `#/`в случае `/bin/sh`.
* Теперь можно разрабатывать, рабочее окружение поднято в докере и VSCode подключен к окружению в докере.

### Демонстрация работы
* Далее в текущем терминале `VSCode`, выполнить команду `npm start`
* И в браузере перейти по URL `http://localhost:9001` (Будет отображен текущий простой интерфейс Фейк-Слака)
* Для демонстрации, нужно открыть еще один удаленный терминал `VSCode` и выполнить команду `npm run example:rtmbot`
* Далее вы увидите в `UI` по адресу `http://localhost:9001` сообщение от бота. Если вы наберете сообщение и отправите его боту (используя Enter или кнопку "Отправить", то получите ответ, с вашим сообщением обратно).

### Как запустить пример интеграционных тестов между ботом (из папки examples) и mad-fake-slack
* Для выполнения интеграционных тестов был использован `jest-puppeteer`.
    * `jest` используется в качестве платформы для написания тестов в консолидации с силой `puppeeter`
* Вам необходимо запустить следующую команду в консоле VSCode `npm run example:rtmbot:integration`

### Тестовый api
* Сейчас поддерживаются следующие тестовые апи:
  * `GET` `/api/db/reset` - сбрасывает текущую базу данных (если вы обновите пользовательский интерфейс mad-fake-slack в своем браузере, вы увидите, что ваши данные разговора исчезли)
  * `GET` `/api/db/current/team?domain=НОВОЕ_ДОМЕННОЕ_ИМЯ` - Усанвливает новое значение для домена текущей команды (по умолчанию, значение для `team.domain` равно `localhost:9001`). Влияет на домен для URL при выдаче веб-сокет урла и при отдаче урла workspace.

### [Список команд NPM](NPMCOMMANDS.md)
### [Локальная установка и запуск анализа кода при помощи Code Climate](CODECLIMATE.md)